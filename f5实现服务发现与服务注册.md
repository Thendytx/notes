1. 现代应用与微服务架构
    1. 现代应用
        1. 四大支柱与六大原则
            1. 四大支柱：扩展性、可移植性、弹性、敏捷性
                1. 算力扩展：1年10倍算力扩展。扩展速度：5min扩容100%
                2. 功能可移植性、管理可移植性。不论是在边缘云、私有云、公有云还是数据中心等都要能够迅速部署、良好运行。
                3. 弹性：面向用户端的弹性、切换的弹性：用户网络环境的切换、节点故障时的切换等
                4. 敏捷性：代码敏捷、架构敏捷，快速迭代
            2. 六大原则：平台无关、开源软件(用户基数)、代码定义一切(配置、架构等也由代码管理)、CI/CD设计、实践安全开发、分布式部署
        2. 应用现代化是长期过程
    2. 架构
        1. 分类
            1. c/s
                传统ADC
            2. 分布式架构/微服务
                静态配置，摩擦大
            3. k8s中的微服务，容器化的微服务
                静态配置，摩擦大
            4. k8s原生
                交付：service proxy：nginx，tengine，open resty，envoy
            5. 云原生
        2. 单体应用与微服务

            应用拆分为多个组件， 分别开发
            <br>[更多](https://microservices.io/patterns/index.html)
            <br>其中有应用模式，包括如何拆分组件、数据的模式； 应用程序基础设施模式， 包括安全、消息、交易、服务治理、API网关； 基础设施模式/部署模式， 如multiple services per host、single service per host、 service per VM、service per container
        3. 微服务的服务发现
            1. 服务发现的两种形式
                1. 客户端的发现

                    组件需要找其他服务时， 直接访问注册中心， 取得相应服务的相关信息， 如暴露方式(ip端口)、成员数、实例数等
                2. 服务端的发现

                    客户端向LB网关发送请求， 由LB与注册中心沟通， 得到服务提供方的信息并转发至服务提供方。<br>优点在于消费方不需要了解服务端的细节， 只要有服务名就可以了。
                    1. 服务发现的方式
                        1. 推送： k8s内agent取得服务信息并发送给网关
                        2. 拉取： 网关上的agent从k8sAPI请求数据
            2. 服务注册的两种形式
                1. 自行注册

                2. 第三方注册

                    第三方通常会有附加服务， 如健康检测
        4. 微服务容器化部署示例
            一个container中运行一项业务， 有完整结构, 包括各种服务和nacos之类的注册中心, 包括业务网关。 
            1. 南北向访问： 外部访问业务系统

                通过k8s暴露服务
                1. 发布方式需要改变
                2. IC如何集成？ 如何发现业务网关？
                3. 访问路径变长
            2. 东西向访问： 业务系统内部或业务系统之间
                1. 改变发布方式
                2. 访问路径变长
2. 服务外发现与服务注册
    1. 网关
        1. 微服务发现代理

            服务端发现。 自动发现服务注册设施中的相关服务实例， 自动注入到网关
        2. 微服务注册代理

            第三方注册。 监控网关上发布的服务， 自动注册到注册中心
        3. 经典场景

            1. MSDA： 现代应用向外部或传统应用暴露服务
                1. 分布式应用但不使用开发框架
                2. 基于开发框架的微服务应用
                3. k8s上的微服务， pod当虚机， 未用k8s原生发布技术
                4. k8s原生应用
            2. MSDA+MSRA：现代应用服务代理
                1. 现代应用之间： 比如一个nacos，一个etcd
                2. 现代应用内部微服务之间
            3. MSRA：外部或传统应用注册到服务发现设施， 暴露给现代应用访问
        4. 连接传统与现代应用
3. 现代应用交付：挑战与解决
4. 基于NOCOS的微服务容器化部署实践