1. 互联网络： 以网关（路由器）连接起本不互相兼容的网络从而形成的网络
2. 体系结构
    1. 分组、连接、数据报

        分组交换， 多路复用， 存储转发， 先进先出；<br>
        统计复用/时分复用/静态复用； 后面两者， 面向连接， 存储状态；<br>
        用数据报， 网无连接， Internet， 使用此法；<br>
        数据报者， 多有边界， 但TCP， 没有边界。
    2. 端到端与命运共享

        1. 系统设计的端到端原则
            
            from book:<br>只有涉及通信系统的应用程序或最终用户， 其正确性和完整性才可能得到实现。 但是， 底层可以提供方便端系统工作的功能， 并最终可能改善性能。 底层功能不应以完美为目标， 因为对应用程序需求做出完美推测是不可能的。<br>通信子网和资源子网的划分就比较符合端到端原则。
            from web:<br>将一些功能放到底层实现可能是没有价值甚至多余的，相比起实现它们的成本而言。相反，只有终端的应用知道自己的具体需求是什么，无论怎么样都需要在终端的应用中实现相同的功能。在底层实现的功能往往只能起到提高性能的作用。<br>
            底层的抽象层往往对上层应用细节不了解，如果提供太多功能，那么所有使用到的应用都需要负担额外的开销，哪怕实际上它们并不需要相关的功能。而且，有时候底层实现的功能可能核应用的需求不符合，这时候应用反而需要想办法绕过或者修改底层，来实现自己的功能。哪怕底层的功能确实是应用所需要的，其提供的保证往往不足或者过多，应用仍然需要实现自己的一套功能。<br>
            不足的例子： 文件传输要求可靠， 但可能的出错不只在传输过程， 因此还要用校验和等方案。<br>
            过多的例子： 实时语音通话的时候，底层网络如果提供了可靠性，那么意味着会发生重传等情况，造成延迟越来越大。但是在语音通话的过程中，出现偶尔的破音、静音都是可以接受的，大不了没听清的人让对面再说一次。哪怕断线了，也可以重拨。这时候底层的可靠性就是完全多余的
        2. 命运共享

            将所有必要状态放在通信端点， 这些状态用于维护一个活动的通信关联。<br>
            命运共享是一种通过虚拟连接维持活动的设计理念。<br>
            注： 对于第一句， 我的理解是： 在彼此通信的端点存储状态， 而不是在通信节点存储状态。 对于第二句话， 我的理解是虚拟连接的共同状态就是命运的共享。
    3. 差错控制和流量控制

        对于网络中数据损坏或丢失的情况的处理， 称为差错控制。 端到端论点和命运共享建议在应用程序附近或内部实现差错控制。<br>
        少数位出错， 可以使用数学办法在传输或接收之后检测并修复。 这样能够修复的情况， 一般由网络来完成修复。 如果出现更严重的错误， 分组网络的解决办法是重传。<br>
        对于顺序要求严格和无差错交付的应用而言， 在网络内部完成重传是有用的。 重传的代价是， 建立和维护连接状态或重传本身的延迟。 <br>
        帧中继和Internet协议对于可靠交付或顺序交付的态度是， 尽力而为。 某些差错通常用差错检测码和校验和来检测， 比如可能影响数据报定向的差错。 对于这样的差错， 数据报被丢弃， 没有更多行动。<br>
        TCP具备流量控制机制， 可以减低发送方的发送速度， 这与端到端论点一致。  这也符合命运共享： 网络基础设施有些单元失效， 只要整个网络仍然健康， 就不会影响网络设备间的通信能力。
3. 设计与实现

    协议体系结构和实现体系结构不同， 后者定义了协议体系中的概念如何用于软件的实现中。<br>
    1. 分层

        "THE"多程序系统的结构 The Structure of the "THE"-Multiprogramming System 这篇论文主张， 以一种层次结构的方式， 检查一个大型软件实现逻辑的稳健型和正确性。<br>
        分层后， 每层只负责通信的一个方面。 分层的益处在于， 允许不同的专业人员实现不同的部分。 <br>
        1. 物理层

            通过某种通信介质/媒介传输数字信息的方法。 介质中的位编码、低层差错检测和纠正、频率分配等
        2. (数据)链路层

            为相同介质的邻居建立连接的协议或方法。 包括差错检测和链路层地址格式等。 如果是共享介质， 还要有介质访问控制协议。
        3. (互联)网络层

            指定不同链路层网络的多跳通信方法。<br>
            对分组网络来说， 它提供可互操作的分组格式， 也包括针对主机的地址方案和对于分组的路由算法。
        4. 传输层

            指定程序之间连接或关联的方法。
        5. 会话层

            应用之间的交互， 如连接初始化、重启、检查点等功能
        6. 表示层

            信息的格式转化和标准化编码
        7. 应用层
    2. 分层实现中的复用、分解和封装

        1. 复用
            
            分层结构的一个优点是具有协议复用的能力， 允许多种协议共存于同一基础设施， 也允许相同协议对象的多个实例同时存在也不被混淆。<br>每层有不同的标识符来确定信息所属协议或信息流。 链路层中， 多数链路技术在每个分组中包含一个协议标识符字段， 用于指出链路层帧携带的协议。 每层的一个协议数据单元(PDU)（比如分组/段/消息）作为不透明数据（有效载荷）被封装在相邻低层。 封装的常见做法是在上一层的PDU前加上头部， 有的是加尾部。 头部用于实现复用， 接收方会根据其中的分解（拆分）标识符来执行分解。 TCP/IP中， 这通常是硬件地址、IP地址和端口号。<br>头部也包含一些重要的状态信息, 如虚电路是已经建立还是正在建立。
        2. 部分支持

            并非所有设备都需要全部的网络功能， 通信子网可能只需要实现下三层， 甚至下两层。<br>
        3. 多宿主

            有多个网络接口的系统称为多宿主， 比如路由器。
        4. read the content

            对于IP层协议来说， 二层设备很大程度上是透明的， 对于路由器和端系统， 二层设备不可见。<br>互联网络的设计目标之一是， 对应用隐藏所有关于网络拓扑和低层协议的细节。
4. TCP/IP协议族结构和协议

    Internet包括TCP/IP协议族， 但也有很多其他协议被包含。
    1. ARPANET参考模型

        ARPANET参考模型被TCP/IP协议族采纳， 是Internet协议分层的基础。 它的结构比OSI模型简单， 但视线中包括一些特定协议， 且不适合常规层次的简化。<br>
        比如， 2.5层。 第4章讨论的ARP协议（地址解析协议）是其中最重要的协议。 它是IPv4的专属协议， 只用于多接入链路层协议（如802.3或802.11）， 实现IP地址和链路层地址的转换。 
        <br>IPv6的地址转换功能则是ICMPv6的一部分， 在第8章讨论。<br>
        3层。IP协议在第5章讨论。 IP层PDU称为IP数据报， 对于IPv4来说是64KB， 对于IPv6来说是4GB。 上下文明确时， 也把它称作分组。 链路层PDU称为帧。 当分组大小大于帧的最大载荷大小时， 需要进行分片， 这由主机或路由器来执行。 在到达目的地后， 分片的数据报会进行重组。 分片会在第10章进行讨论。<br>
        第2章和第6章讨论寻址和配置的工作原理， 会关注IP的细节。 根据数据报中的目的IP地址确定将数据报发到哪里并将其发送到下一跳的过程称为 转发。 IP地址分为三类， 这决定如何转发。 分别是， 单播、广播、组播。<br>
        3.5层。 ICMP， Internet Control Message Protocol， IP的一个辅助协议， 它被用于与其他主机或路由器的IP层交换差错消息和其他信息。 ICMP消息被封装在IP数据报中， 封装方式与传输层PDU相同。 它分为ICMPv4和ICMPv6.<br>IGMP， Internet Group Management Protocol, IPv4的另一个辅助协议。 它采用组播寻址和交付来管理作为组播组成员的主机。 一组接收方接受一个特定目的地址的组播流量。 第9章会讨论IGMP和MLD(Multicast Listener Discovery， 组播监听发现)， 后者用于IPv6。
        4层。 TCP和UDP。 TCP， 传输控制协议， 会处理数据包丢失、重复和重新排序等问题， 面向连接， 不保留消息边界。 UDP保留消息边界， 但实现速率控制或差错控制。
        <br>TCP提供的可靠数据流使应用层可以忽略传输中的细节。 TCP发送到IP的PDU称为TCP段。 UDP只提供端口号和校验和， 从而在端系统校验完整性和复用、分解数据。 TCP的拥塞控制功能在第16章讨论<br>
    2. TCP/IP中的复用、分解和封装
        1. 第3章会讨论链路层协议。 以太网帧包括一个48位的目的地址（又称链路层地址， 或介质访问控制地址），一个48位的源地址和一个16位的以太网类型字段。 0x0800, 0x0806, 0x86DD分别表示该帧包含IPv4数据报/ARP分组/IPv6数据报。 以太网帧的最后还有FCS字段， 在接收方发现目的地址与自身地址一致时， 会接收该帧并根据FCS校验差错， 再根据以太网类型字段选择处理它的网络层协议。<br>如果包含的是一个IP数据报， 那么以太网帧的头部和尾部将被清除， 剩余字节由IP处理。 IP检测一系列字段， 包括目的IP。 如果目的IP与自身的一个IP匹配， 且数据报头部没有错误， 则检测IPv4的8位协议字段， 或IPv6的下一个头部字段。 常见的值包括， 1/2/4/6/17， 分别表示ICMP/IGMP/IPv4/TCP/UDP。 41表示IPv6。 4和41表面IP数据报作为该数据报的有效载荷， 这违反了分层和封装的原有概念， 但事实隧道技术的基础。 第3章将会对此进行更多讨论。<br>
        如果网络层认为数据报有效， 并以确定正确的传输层协议， 那么数据报（可能经过了分片重组）交给传输层处理。  传输层的大部分协议是通过端口号将复用分解到正确的进程。
    3. 端口号

        一个16位无符号整数。 这意味着一个IP有65536个端口号。 多数传输层协议（如TCP和UDP）使用端口号确定接收数据的具体进程。 <br>
        标准端口号由Internet号码分配机构（IANA）分配。 熟知端口号， 0~1023， 注册端口号， 1024~49151， 动态/私有端口号， 47152~65535。 传统做法是， 服务器要绑定到一个熟知端口号， 这要求管理员/root权限。<br>
        SSH：22， FTP：20和21， Telnet：23， SMTP：25， DNS：53， HTTP：80， HTTPS：443， IMAP（Internet Message Access Protocol， 旧称Interactive Mail Access Protocol）：143， IMAPS：993， SNMP：161和162， LDAP（Lightweight Directory Access Protocol）：389
